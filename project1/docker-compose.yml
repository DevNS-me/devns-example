# ============================================================================
# Project 1 - HTTP Only Example
# ============================================================================
# This is a simple example project using the traefik/whoami image
# Replace this with your actual application container
# ============================================================================

services:
  whoami:
    # Example application - replace with your actual image
    image: traefik/whoami

    environment:
      - WHOAMI_NAME=${COMPOSE_PROJECT_NAME}

    # Traefik labels for routing configuration
    labels:
      # Enable Traefik for this container
      - traefik.enable=true

      # HTTP routing rule - accepts requests from both:
      # - APP_DOMAIN (.localhost for local development)
      # - APP_DOMAIN_LAN (.devns.me for LAN access)
      - traefik.http.routers.${COMPOSE_PROJECT_NAME}.rule=Host(`${APP_DOMAIN}`) || Host(`${APP_DOMAIN_LAN}`)

      # Tell Traefik which port your application listens on inside the container
      # Change this if your app uses a different port (e.g., 3000, 5000)
      - traefik.http.services.${COMPOSE_PROJECT_NAME}.loadbalancer.server.port=80

    networks:
      - proxy

networks:
  # Default network for internal container communication
  default:

  # External Traefik proxy network (created by traefik/docker-compose.yml)
  proxy:
    name: ${PROXY_NETWORK}
    external: true
